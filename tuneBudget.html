<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Budget Planner - Tune Budget (Enhanced)</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family:
          'Inter',
          -apple-system,
          BlinkMacSystemFont,
          'Segoe UI',
          Roboto,
          sans-serif;
        background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        color: #1e293b;
        line-height: 1.6;
        overflow-x: hidden;
      }

      .app-container {
        display: flex;
        min-height: 100vh;
      }

      /* Header */
      .header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        height: 70px;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-bottom: 1px solid rgba(226, 232, 240, 0.8);
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 2rem;
        z-index: 100;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }

      .header-right {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .avatar {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 600;
        font-size: 0.875rem;
        cursor: pointer;
      }

      .settings-icon {
        width: 36px;
        height: 36px;
        border-radius: 8px;
        background: #f1f5f9;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #64748b;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .settings-icon:hover {
        background: #e2e8f0;
        color: #1e293b;
      }

      .logo-area {
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }

      .logo-icon {
        font-size: 1.75rem;
      }

      .logo-text {
        font-size: 1.25rem;
        font-weight: 700;
        color: #1e293b;
      }

      .breadcrumb {
        font-size: 0.875rem;
        color: #64748b;
        margin-top: 0.25rem;
      }

      /* Sidebar */
      .sidebar {
        width: 320px;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-right: 1px solid rgba(226, 232, 240, 0.8);
        position: fixed;
        left: 0;
        top: 70px;
        bottom: 0;
        overflow-y: auto;
        z-index: 50;
        display: flex;
        flex-direction: column;
      }

      .sidebar-section {
        padding: 1.5rem;
        border-bottom: 1px solid rgba(226, 232, 240, 0.5);
      }

      .sidebar-title {
        font-size: 0.875rem;
        font-weight: 600;
        color: #64748b;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin-bottom: 1rem;
      }

      .sidebar-nav-item {
        display: flex;
        align-items: center;
        padding: 0.75rem;
        margin-bottom: 0.5rem;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s ease;
        color: #64748b;
        text-decoration: none;
        font-weight: 500;
        position: relative;
      }

      .sidebar-nav-item:hover {
        background: rgba(241, 245, 249, 0.8);
        color: #1e293b;
      }

      .sidebar-nav-item.active {
        background: linear-gradient(135deg, #1e293b, #334155);
        color: white;
        box-shadow: 0 4px 12px rgba(30, 41, 59, 0.3);
      }

      .nav-icon {
        margin-right: 0.75rem;
        font-size: 1.125rem;
      }

      /* Budget Summary */
      .budget-summary {
        background: linear-gradient(135deg, #3b82f6, #2563eb);
        color: white;
        padding: 1.5rem;
        border-radius: 12px;
        margin-bottom: 1.5rem;
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
      }

      .summary-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.75rem;
        font-size: 0.875rem;
      }

      .summary-row:last-child {
        margin-bottom: 0;
        padding-top: 0.75rem;
        border-top: 1px solid rgba(255, 255, 255, 0.2);
        font-weight: 600;
      }

      .summary-label {
        opacity: 0.9;
      }

      .summary-value {
        font-weight: 600;
      }

      /* Impact Preview */
      .impact-preview {
        background: rgba(255, 255, 255, 0.6);
        backdrop-filter: blur(10px);
        padding: 1rem;
        border-radius: 8px;
        border: 1px solid rgba(226, 232, 240, 0.8);
      }

      .impact-title {
        font-size: 0.875rem;
        font-weight: 600;
        color: #1e293b;
        margin-bottom: 0.75rem;
      }

      .impact-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.5rem 0;
        font-size: 0.75rem;
        border-bottom: 1px solid rgba(241, 245, 249, 0.8);
      }

      .impact-item:last-child {
        border-bottom: none;
      }

      .impact-change {
        font-weight: 600;
      }

      .impact-change.positive {
        color: #059669;
      }

      .impact-change.negative {
        color: #dc2626;
      }

      /* Main Content */
      .main-content {
        margin-left: 320px;
        margin-top: 70px;
        padding: 2rem;
        min-height: calc(100vh - 70px);
        max-width: calc(100vw - 320px);
        width: calc(100vw - 320px);
      }

      .page-header {
        margin-bottom: 2rem;
      }

      .page-title {
        font-size: 2.5rem;
        font-weight: 700;
        color: #1e293b;
        margin-bottom: 0.5rem;
      }

      .page-subtitle {
        font-size: 1.125rem;
        color: #64748b;
      }

      /* Content Grid */
      .content-grid {
        display: grid;
        grid-template-columns: 1fr 400px;
        gap: 2rem;
        align-items: start;
      }

      .budget-sections {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
      }

      /* Budget Section Styles */
      .budget-section {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        border-radius: 16px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        overflow: hidden;
        transition: all 0.3s ease;
      }

      .budget-section:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
      }

      .section-header {
        padding: 1.5rem 2rem;
        background: #f8fafc;
        border-bottom: 1px solid #e2e8f0;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .section-header.income {
        background: linear-gradient(135deg, #f0fdf4, #dcfce7);
        border-bottom-color: #bbf7d0;
      }

      .section-header.expenses {
        background: linear-gradient(135deg, #fef2f2, #fee2e2);
        border-bottom-color: #fecaca;
      }

      .section-header.goals {
        background: linear-gradient(135deg, #eff6ff, #dbeafe);
        border-bottom-color: #bfdbfe;
      }

      .section-info {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .section-icon {
        font-size: 1.5rem;
      }

      .section-details h3 {
        font-size: 1.125rem;
        font-weight: 600;
        color: #1e293b;
        margin: 0;
      }

      .section-description {
        font-size: 0.875rem;
        color: #64748b;
        margin-top: 0.25rem;
      }

      .section-total {
        font-size: 1.25rem;
        font-weight: 700;
        color: #1e293b;
      }

      .section-content {
        padding: 2rem;
      }

      /* Budget Item Styles */
      .budget-item {
        display: grid;
        grid-template-columns: 2fr 120px 200px 80px;
        align-items: center;
        gap: 1rem;
        padding: 1.25rem;
        background: #f8fafc;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        margin-bottom: 0.75rem;
        transition: all 0.2s ease;
      }

      .budget-item:hover {
        background: #f1f5f9;
        border-color: #cbd5e1;
      }

      .budget-item:last-child {
        margin-bottom: 0;
      }

      .item-name {
        font-weight: 500;
        color: #1e293b;
        font-size: 0.875rem;
      }

      .item-frequency {
        font-size: 0.75rem;
        color: #64748b;
        margin-top: 0.25rem;
      }

      .item-amount {
        font-weight: 600;
        color: #1e293b;
        text-align: right;
        font-size: 0.875rem;
        justify-self: end;
      }

      .item-slider {
        display: flex;
        align-items: center;
        justify-self: center;
        width: 100%;
      }

      .slider-container {
        position: relative;
        margin-bottom: 0.5rem;
      }

      .budget-slider {
        width: 100%;
        height: 12px;
        border-radius: 6px;
        background: #e2e8f0;
        outline: none;
        appearance: none;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .budget-slider:hover {
        background: #cbd5e1;
      }

      .budget-slider::-webkit-slider-thumb {
        appearance: none;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        background: #3b82f6;
        cursor: pointer;
        border: 3px solid white;
        box-shadow: 0 2px 12px rgba(59, 130, 246, 0.4);
        transition: all 0.2s ease;
      }

      .budget-slider::-webkit-slider-thumb:hover {
        background: #2563eb;
        transform: scale(1.1);
        box-shadow: 0 4px 16px rgba(59, 130, 246, 0.5);
      }

      .budget-slider::-moz-range-thumb {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        background: #3b82f6;
        cursor: pointer;
        border: 3px solid white;
        box-shadow: 0 2px 12px rgba(59, 130, 246, 0.4);
        transition: all 0.2s ease;
      }

      .budget-slider::-moz-range-thumb:hover {
        background: #2563eb;
        transform: scale(1.1);
        box-shadow: 0 4px 16px rgba(59, 130, 246, 0.5);
      }

      .slider-value {
        font-size: 0.75rem;
        color: #64748b;
        text-align: center;
      }

      .item-actions {
        display: flex;
        gap: 0.5rem;
        justify-self: center;
      }

      .item-btn {
        padding: 0.5rem 0.75rem;
        background: white;
        border: 1px solid #e2e8f0;
        border-radius: 6px;
        font-size: 0.75rem;
        cursor: pointer;
        transition: all 0.2s ease;
        color: #64748b;
        font-weight: 500;
      }

      .item-btn:hover {
        border-color: #cbd5e1;
        color: #1e293b;
      }

      .item-btn.edit {
        color: #3b82f6;
      }

      .item-btn.edit:hover {
        background: #eff6ff;
        border-color: #3b82f6;
      }

      .item-btn.delete:hover {
        border-color: #ef4444;
        color: #ef4444;
        background: #fef2f2;
      }

      /* Expense Categories */
      .expense-category {
        margin-bottom: 2rem;
        border: 1px solid #e2e8f0;
        border-radius: 12px;
        overflow: hidden;
        background: white;
      }

      .expense-category.virtual-fund {
        border-color: #0ea5e9;
        background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
      }

      .category-header {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 1rem 1.5rem;
        background: #f8fafc;
        border-bottom: 1px solid #e2e8f0;
      }

      .expense-category.virtual-fund .category-header {
        background: linear-gradient(135deg, #e0f2fe, #bae6fd);
        border-bottom-color: #7dd3fc;
      }

      .category-icon {
        font-size: 1rem;
        width: 20px;
        text-align: center;
      }

      .category-info {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
      }

      .category-info h4 {
        font-size: 0.875rem;
        font-weight: 600;
        color: #1e293b;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin: 0;
      }

      .category-total {
        font-size: 0.875rem;
        font-weight: 700;
        color: #059669;
      }

      .expense-category .budget-item {
        margin-left: 1rem;
        margin-right: 1rem;
      }

      .expense-category .budget-item:first-of-type {
        margin-top: 1rem;
      }

      .expense-category .budget-item:last-of-type {
        margin-bottom: 1rem;
      }

      /* Add Item Button */
      .add-item-btn {
        background: #f8fafc;
        border: 2px dashed #e2e8f0;
        padding: 1rem 2rem;
        border-radius: 8px;
        color: #64748b;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
        width: 100%;
        margin-top: 1rem;
      }

      .add-item-btn:hover {
        border-color: #3b82f6;
        color: #3b82f6;
        background: #eff6ff;
      }

      /* Impact Panel */
      .impact-panel {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        padding: 2rem;
        border-radius: 16px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        height: fit-content;
        position: sticky;
        top: 2rem;
      }

      .impact-title-main {
        font-size: 1.25rem;
        font-weight: 600;
        color: #1e293b;
        margin-bottom: 1.5rem;
        text-align: center;
      }

      /* Allocated Income Progress */
      .health-score {
        text-align: center;
        margin-bottom: 2rem;
      }

      .progress-container {
        display: flex;
        align-items: flex-end;
        justify-content: center;
        gap: 1rem;
        margin-bottom: 1rem;
      }

      .score-circle {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        background: conic-gradient(#10b981 0deg 342deg, #e2e8f0 342deg 360deg);
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        flex-shrink: 0;
      }

      .score-circle::after {
        content: '';
        position: absolute;
        width: 70px;
        height: 70px;
        border-radius: 50%;
        background: white;
      }

      .score-value {
        font-size: 1.2rem;
        font-weight: 700;
        color: #059669;
        z-index: 1;
        position: relative;
      }

      .allocation-figures {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        margin-bottom: 0.5rem;
      }

      .allocated-amount {
        font-size: 1.25rem;
        font-weight: 700;
        color: #1e293b;
        line-height: 1;
      }

      .total-income {
        font-size: 0.875rem;
        color: #64748b;
        font-weight: 500;
        margin-top: 0.25rem;
      }

      .score-label {
        font-size: 0.875rem;
        color: #64748b;
        font-weight: 500;
      }

      /* Impact Metrics */
      .impact-metrics {
        display: grid;
        grid-template-columns: 1fr;
        gap: 1rem;
        margin-bottom: 2rem;
      }

      .impact-card {
        background: rgba(248, 250, 252, 0.8);
        border: 1px solid rgba(226, 232, 240, 0.5);
        padding: 1rem;
        border-radius: 12px;
        text-align: center;
        transition: all 0.3s ease;
      }

      .impact-card:hover {
        background: rgba(255, 255, 255, 0.9);
        border-color: rgba(203, 213, 225, 0.8);
      }

      .impact-label {
        font-size: 0.75rem;
        color: #64748b;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin-bottom: 0.5rem;
      }

      .impact-value {
        font-size: 1.25rem;
        font-weight: 700;
        color: #1e293b;
        margin-bottom: 0.25rem;
      }

      .impact-change-text {
        font-size: 0.75rem;
        font-weight: 500;
      }

      .impact-change-text.positive {
        color: #059669;
      }

      .impact-change-text.negative {
        color: #dc2626;
      }

      .impact-change-text.neutral {
        color: #64748b;
      }

      /* 50/30/20 Rule Monitoring */
      .rule-monitoring {
        background: rgba(248, 250, 252, 0.8);
        border: 1px solid rgba(226, 232, 240, 0.5);
        padding: 1.5rem;
        border-radius: 16px;
        margin-bottom: 2rem;
      }

      .rule-title {
        font-size: 1rem;
        font-weight: 600;
        color: #1e293b;
        margin-bottom: 1.25rem;
        text-align: center;
      }

      .rule-breakdown {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        margin-bottom: 1.25rem;
      }

      .rule-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 1rem;
      }

      .rule-category {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        min-width: 120px;
      }

      .rule-icon {
        font-size: 0.875rem;
        width: 16px;
        text-align: center;
      }

      .rule-label {
        font-size: 0.75rem;
        font-weight: 500;
        color: #64748b;
      }

      .rule-progress {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        flex: 1;
      }

      .rule-bar {
        flex: 1;
        height: 8px;
        background: #f1f5f9;
        border-radius: 4px;
        overflow: hidden;
        position: relative;
      }

      .rule-fill {
        height: 100%;
        border-radius: 4px;
        transition: width 0.3s ease;
      }

      .rule-fill.needs {
        background: linear-gradient(90deg, #ef4444, #dc2626);
      }

      .rule-fill.wants {
        background: linear-gradient(90deg, #f59e0b, #d97706);
      }

      .rule-fill.savings {
        background: linear-gradient(90deg, #10b981, #059669);
      }

      .rule-percentage {
        font-size: 0.75rem;
        font-weight: 600;
        color: #1e293b;
        min-width: 30px;
        text-align: right;
      }

      .rule-status {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 1rem;
        background: rgba(240, 253, 244, 0.8);
        border: 1px solid rgba(187, 247, 208, 0.6);
        border-radius: 12px;
        text-align: left;
      }

      .rule-status.warning {
        background: rgba(255, 251, 235, 0.8);
        border-color: rgba(253, 230, 138, 0.6);
      }

      .rule-status.danger {
        background: rgba(254, 242, 242, 0.8);
        border-color: rgba(252, 165, 165, 0.6);
      }

      .status-icon {
        font-size: 1.25rem;
        flex-shrink: 0;
      }

      .status-text {
        font-size: 0.8rem;
        color: #166534;
        font-weight: 500;
        line-height: 1.4;
      }

      .rule-status.warning .status-text {
        color: #92400e;
      }

      .rule-status.danger .status-text {
        color: #991b1b;
      }

      /* Goals Timeline */
      .goals-timeline {
        margin-bottom: 2rem;
      }

      .timeline-title {
        font-size: 1rem;
        font-weight: 600;
        color: #1e293b;
        margin-bottom: 1rem;
        text-align: center;
      }

      .timeline-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.75rem 0;
        border-bottom: 1px solid rgba(226, 232, 240, 0.5);
        font-size: 0.875rem;
      }

      .timeline-item:last-child {
        border-bottom: none;
      }

      .timeline-goal {
        font-weight: 500;
        color: #1e293b;
      }

      .timeline-date {
        font-weight: 600;
        color: #3b82f6;
        font-size: 0.75rem;
      }

      /* Action Buttons */
      .action-buttons {
        display: flex;
        gap: 1rem;
      }

      .action-btn {
        flex: 1;
        padding: 0.75rem;
        border-radius: 8px;
        font-weight: 600;
        font-size: 0.875rem;
        cursor: pointer;
        transition: all 0.2s ease;
        border: 2px solid transparent;
      }

      .action-btn.primary {
        background: linear-gradient(135deg, #10b981, #059669);
        color: white;
        border-color: #10b981;
      }

      .action-btn.primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 24px rgba(16, 185, 129, 0.3);
      }

      .action-btn.secondary {
        background: transparent;
        color: #64748b;
        border-color: #e2e8f0;
      }

      .action-btn.secondary:hover {
        background: #f8fafc;
        color: #1e293b;
        border-color: #cbd5e1;
      }

      /* Responsive */
      @media (max-width: 1200px) {
        .content-grid {
          grid-template-columns: 1fr;
          gap: 2rem;
        }

        .impact-panel {
          position: static;
        }
      }

      @media (max-width: 768px) {
        .sidebar {
          transform: translateX(-100%);
          transition: transform 0.3s ease;
        }

        .main-content {
          margin-left: 0;
          width: 100vw;
          max-width: 100vw;
          padding: 1rem;
        }

        .page-title {
          font-size: 2rem;
        }

        .budget-item {
          flex-direction: column;
          align-items: stretch;
          gap: 0.5rem;
        }

        .item-slider {
          min-width: auto;
          margin-right: 0;
        }

        .item-actions {
          justify-content: center;
        }
      }
    </style>
  </head>
  <body>
    <div class="app-container">
      <!-- Header -->
      <header class="header">
        <div class="logo-area">
          <span class="logo-icon">💰</span>
          <div>
            <div class="logo-text">Budget Planner</div>
            <div class="breadcrumb">Tune Budget</div>
          </div>
        </div>
        <div class="header-right">
          <div class="avatar">SJ</div>
          <div class="settings-icon">⚙️</div>
        </div>
      </header>

      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="sidebar-section">
          <div class="sidebar-title">Navigation</div>
          <a href="#" class="sidebar-nav-item">
            <span class="nav-icon">🏠</span>
            <span>Home</span>
          </a>
          <a href="#" class="sidebar-nav-item active">
            <span class="nav-icon">⚙️</span>
            <span>Tune Budget</span>
          </a>
          <a href="#" class="sidebar-nav-item">
            <span class="nav-icon">🎯</span>
            <span>Goals</span>
          </a>
          <a href="#" class="sidebar-nav-item">
            <span class="nav-icon">📊</span>
            <span>Scenarios</span>
          </a>
        </div>

        <div class="sidebar-section">
          <div class="sidebar-title">Current Budget</div>
          <div class="budget-summary">
            <div class="summary-row">
              <span class="summary-label">Income</span>
              <span class="summary-value" id="sidebar-income">£2,900</span>
            </div>
            <div class="summary-row">
              <span class="summary-label">Expenses</span>
              <span class="summary-value" id="sidebar-expenses">£2,092</span>
            </div>
            <div class="summary-row">
              <span class="summary-label">Goals</span>
              <span class="summary-value" id="sidebar-goals">£658</span>
            </div>
            <div class="summary-row">
              <span class="summary-label">Surplus</span>
              <span class="summary-value" id="sidebar-surplus">£150</span>
            </div>
          </div>
        </div>

        <div class="sidebar-section">
          <div class="impact-preview">
            <div class="impact-title">Impact Preview</div>
            <div class="impact-item">
              <span>Credit Card Payoff</span>
              <span class="impact-change neutral" id="preview-debt"
                >Dec 2025</span
              >
            </div>
            <div class="impact-item">
              <span>Emergency Fund</span>
              <span class="impact-change neutral" id="preview-emergency"
                >Mar 2026</span
              >
            </div>
            <div class="impact-item">
              <span>Holiday Fund</span>
              <span class="impact-change positive" id="preview-holiday"
                >2 months early</span
              >
            </div>
            <div class="impact-item">
              <span>Monthly Buffer</span>
              <span class="impact-change neutral" id="preview-buffer"
                >£150</span
              >
            </div>
          </div>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="main-content">
        <div class="page-header">
          <h1 class="page-title">Tune Your Budget</h1>
          <p class="page-subtitle">
            Adjust your spending and see how it affects your financial goals in
            real-time
          </p>
        </div>

        <div class="content-grid">
          <div class="budget-sections">
            <!-- Income Section -->
            <div class="budget-section">
              <div class="section-header income">
                <div class="section-info">
                  <span class="section-icon">💼</span>
                  <div class="section-details">
                    <h3>Income</h3>
                    <div class="section-description">
                      Your monthly income sources
                    </div>
                  </div>
                </div>
                <div class="section-total" id="income-total">£2,900</div>
              </div>
              <div class="section-content">
                <div class="budget-item">
                  <div>
                    <div class="item-name">Employment</div>
                    <div class="item-frequency">Monthly salary after tax</div>
                  </div>
                  <div class="item-amount">£2,500</div>
                  <div class="item-actions">
                    <button class="item-btn edit">Edit</button>
                  </div>
                </div>
                <div class="budget-item">
                  <div>
                    <div class="item-name">Freelance Work</div>
                    <div class="item-frequency">Variable income</div>
                  </div>
                  <div class="item-amount">£200-£600</div>
                  <div class="item-actions">
                    <button class="item-btn edit">Edit</button>
                    <button class="item-btn delete">Delete</button>
                  </div>
                </div>
                <button class="add-item-btn">+ Add Income Source</button>
              </div>
            </div>

            <!-- Expenses Section -->
            <div class="budget-section">
              <div class="section-header expenses">
                <div class="section-info">
                  <span class="section-icon">🏠</span>
                  <div class="section-details">
                    <h3>Expenses</h3>
                    <div class="section-description">
                      Monthly spending - adjust with sliders
                    </div>
                  </div>
                </div>
                <div class="section-total" id="expenses-total">£2,092</div>
              </div>
              <div class="section-content">
                <!-- Essentials Category -->
                <div class="expense-category">
                  <div class="category-header">
                    <span class="category-icon">🔴</span>
                    <div class="category-info">
                      <h4>ESSENTIALS</h4>
                      <span class="category-total" id="essentials-total"
                        >£1,500</span
                      >
                    </div>
                  </div>

                  <div class="budget-item">
                    <div class="item-name">Rent</div>
                    <div class="item-amount">£1,200</div>
                    <div class="item-slider">
                      <input
                        type="range"
                        class="budget-slider"
                        min="1000"
                        max="1500"
                        value="1200"
                        data-item="rent"
                        data-category="essentials"
                        oninput="updateBudgetItem(this)"
                      />
                    </div>
                    <div class="item-actions">
                      <button class="item-btn edit">Edit</button>
                    </div>
                  </div>

                  <div class="budget-item">
                    <div class="item-name">Utilities</div>
                    <div class="item-amount">£150</div>
                    <div class="item-slider">
                      <input
                        type="range"
                        class="budget-slider"
                        min="100"
                        max="250"
                        value="150"
                        data-item="utilities"
                        data-category="essentials"
                        oninput="updateBudgetItem(this)"
                      />
                    </div>
                    <div class="item-actions">
                      <button class="item-btn edit">Edit</button>
                    </div>
                  </div>

                  <div class="budget-item">
                    <div class="item-name">Insurance</div>
                    <div class="item-amount">£150</div>
                    <div class="item-slider">
                      <input
                        type="range"
                        class="budget-slider"
                        min="50"
                        max="300"
                        value="150"
                        data-item="insurance"
                        data-category="essentials"
                        oninput="updateBudgetItem(this)"
                      />
                    </div>
                    <div class="item-actions">
                      <button class="item-btn edit">Edit</button>
                    </div>
                  </div>
                </div>

                <!-- Basics Category -->
                <div class="expense-category">
                  <div class="category-header">
                    <span class="category-icon">🟡</span>
                    <div class="category-info">
                      <h4>BASICS</h4>
                      <span class="category-total" id="basics-total">£550</span>
                    </div>
                  </div>

                  <div class="budget-item">
                    <div class="item-name">Groceries</div>
                    <div class="item-amount">£300</div>
                    <div class="item-slider">
                      <input
                        type="range"
                        class="budget-slider"
                        min="200"
                        max="500"
                        value="300"
                        data-item="groceries"
                        data-category="basics"
                        oninput="updateBudgetItem(this)"
                      />
                    </div>
                    <div class="item-actions">
                      <button class="item-btn edit">Edit</button>
                    </div>
                  </div>

                  <div class="budget-item">
                    <div class="item-name">Transport</div>
                    <div class="item-amount">£250</div>
                    <div class="item-slider">
                      <input
                        type="range"
                        class="budget-slider"
                        min="150"
                        max="400"
                        value="250"
                        data-item="transport"
                        data-category="basics"
                        oninput="updateBudgetItem(this)"
                      />
                    </div>
                    <div class="item-actions">
                      <button class="item-btn edit">Edit</button>
                    </div>
                  </div>
                </div>

                <!-- Wants Category -->
                <div class="expense-category">
                  <div class="category-header">
                    <span class="category-icon">🟢</span>
                    <div class="category-info">
                      <h4>WANTS</h4>
                      <span class="category-total" id="wants-total">£192</span>
                    </div>
                  </div>

                  <div class="budget-item">
                    <div class="item-name">Entertainment</div>
                    <div class="item-amount">£192</div>
                    <div class="item-slider">
                      <input
                        type="range"
                        class="budget-slider"
                        min="50"
                        max="400"
                        value="192"
                        data-item="entertainment"
                        data-category="wants"
                        oninput="updateBudgetItem(this)"
                      />
                    </div>
                    <div class="item-actions">
                      <button class="item-btn edit">Edit</button>
                    </div>
                  </div>
                </div>

                <!-- Virtual Fund Category -->
                <div class="expense-category virtual-fund">
                  <div class="category-header">
                    <span class="category-icon">⚡</span>
                    <div class="category-info">
                      <h4>VIRTUAL FUND</h4>
                      <span
                        class="category-total"
                        id="virtualfund-category-total"
                        >£150</span
                      >
                    </div>
                  </div>

                  <div class="budget-item">
                    <div class="item-name">Emergency Buffer</div>
                    <div class="item-amount">£150</div>
                    <div class="item-slider">
                      <input
                        type="range"
                        class="budget-slider"
                        min="0"
                        max="300"
                        value="150"
                        data-item="virtualfund"
                        data-category="virtualfund"
                        oninput="updateBudgetItem(this)"
                      />
                    </div>
                    <div class="item-actions">
                      <button class="item-btn edit">Edit</button>
                    </div>
                  </div>
                </div>

                <button class="add-item-btn">+ Add Expense</button>
              </div>
            </div>

            <!-- Goals Section -->
            <div class="budget-section">
              <div class="section-header goals">
                <div class="section-info">
                  <span class="section-icon">🎯</span>
                  <div class="section-details">
                    <h3>Goals</h3>
                    <div class="section-description">
                      Adjust goal allocations
                    </div>
                  </div>
                </div>
                <div class="section-total" id="goals-total">£658</div>
              </div>
              <div class="section-content">
                <div class="budget-item">
                  <div>
                    <div class="item-name">Emergency Fund</div>
                    <div class="item-frequency">Target: £5,000</div>
                  </div>
                  <div class="item-amount">£300</div>
                  <div class="item-slider">
                    <div class="slider-container">
                      <input
                        type="range"
                        class="budget-slider"
                        min="0"
                        max="500"
                        value="300"
                        data-item="emergency"
                        oninput="updateBudgetItem(this)"
                      />
                    </div>
                    <div class="slider-value">£0 - £500</div>
                  </div>
                  <div class="item-actions">
                    <button class="item-btn edit">Edit</button>
                  </div>
                </div>

                <div class="budget-item">
                  <div>
                    <div class="item-name">Credit Card Debt</div>
                    <div class="item-frequency">Balance: £1,500 @ 19.9%</div>
                  </div>
                  <div class="item-amount">£208</div>
                  <div class="item-slider">
                    <div class="slider-container">
                      <input
                        type="range"
                        class="budget-slider"
                        min="50"
                        max="400"
                        value="208"
                        data-item="debt"
                        oninput="updateBudgetItem(this)"
                      />
                    </div>
                    <div class="slider-value">£50 - £400</div>
                  </div>
                  <div class="item-actions">
                    <button class="item-btn edit">Edit</button>
                  </div>
                </div>

                <div class="budget-item">
                  <div>
                    <div class="item-name">Holiday Fund</div>
                    <div class="item-frequency">Target: £2,000</div>
                  </div>
                  <div class="item-amount">£150</div>
                  <div class="item-slider">
                    <div class="slider-container">
                      <input
                        type="range"
                        class="budget-slider"
                        min="0"
                        max="300"
                        value="150"
                        data-item="holiday"
                        oninput="updateBudgetItem(this)"
                      />
                    </div>
                    <div class="slider-value">£0 - £300</div>
                  </div>
                  <div class="item-actions">
                    <button class="item-btn edit">Edit</button>
                    <button class="item-btn delete">Delete</button>
                  </div>
                </div>

                <button class="add-item-btn">+ Add Goal</button>
              </div>
            </div>
          </div>

          <!-- Impact Panel -->
          <div class="impact-panel">
            <h2 class="impact-title-main">Budget Impact</h2>

            <!-- Allocated Income Progress -->
            <div class="health-score">
              <div class="progress-container">
                <div class="score-circle" id="allocationCircle">
                  <div class="score-value" id="allocationPercentage">95%</div>
                </div>
                <div class="allocation-figures" id="allocationFigures">
                  <div class="allocated-amount">£2,750</div>
                  <div class="total-income">of £2,900</div>
                </div>
              </div>
              <div class="score-label">Income Allocated</div>
            </div>

            <!-- Impact Metrics -->
            <div class="impact-metrics">
              <div class="impact-card">
                <div class="impact-label">Debt Freedom</div>
                <div class="impact-value" id="debt-freedom-value">Dec 2025</div>
                <div
                  class="impact-change-text neutral"
                  id="debt-freedom-change"
                >
                  On track
                </div>
              </div>

              <div class="impact-card">
                <div class="impact-label">Saving Funds</div>
                <div class="impact-value" id="saving-funds-value">£450</div>
                <div
                  class="impact-change-text neutral"
                  id="saving-funds-change"
                >
                  Per month
                </div>
              </div>

              <div class="impact-card">
                <div class="impact-label">Emergency Buffer</div>
                <div class="impact-value" id="buffer-value">3.2 months</div>
                <div class="impact-change-text neutral" id="buffer-change">
                  Secure
                </div>
              </div>
            </div>

            <!-- 50/30/20 Rule Monitoring -->
            <div class="rule-monitoring">
              <div class="rule-title">50/30/20 Rule Status</div>
              <div class="rule-breakdown">
                <div class="rule-item">
                  <div class="rule-category">
                    <span class="rule-icon">🏠</span>
                    <span class="rule-label">Needs (50%)</span>
                  </div>
                  <div class="rule-progress">
                    <div class="rule-bar">
                      <div
                        class="rule-fill needs"
                        id="needsFill"
                        style="width: 45%"
                      ></div>
                    </div>
                    <div class="rule-percentage" id="needsPercentage">45%</div>
                  </div>
                </div>

                <div class="rule-item">
                  <div class="rule-category">
                    <span class="rule-icon">🎯</span>
                    <span class="rule-label">Wants (30%)</span>
                  </div>
                  <div class="rule-progress">
                    <div class="rule-bar">
                      <div
                        class="rule-fill wants"
                        id="wantsFill"
                        style="width: 15%"
                      ></div>
                    </div>
                    <div class="rule-percentage" id="wantsPercentage">15%</div>
                  </div>
                </div>

                <div class="rule-item">
                  <div class="rule-category">
                    <span class="rule-icon">💰</span>
                    <span class="rule-label">Savings (20%)</span>
                  </div>
                  <div class="rule-progress">
                    <div class="rule-bar">
                      <div
                        class="rule-fill savings"
                        id="savingsFill"
                        style="width: 25%"
                      ></div>
                    </div>
                    <div class="rule-percentage" id="savingsPercentage">
                      25%
                    </div>
                  </div>
                </div>
              </div>

              <div class="rule-status" id="ruleStatus">
                <div class="status-icon">✅</div>
                <div class="status-text">
                  Great balance! You're exceeding the savings target.
                </div>
              </div>
            </div>

            <!-- Goals Timeline -->
            <div class="goals-timeline">
              <div class="timeline-title">🎯 Goal Completion Timeline</div>
              <div class="timeline-item">
                <div class="timeline-goal">Holiday Fund</div>
                <div class="timeline-date" id="holiday-timeline">Aug 2025</div>
              </div>
              <div class="timeline-item">
                <div class="timeline-goal">Credit Card Clear</div>
                <div class="timeline-date" id="debt-timeline">Dec 2025</div>
              </div>
              <div class="timeline-item">
                <div class="timeline-goal">Emergency Fund</div>
                <div class="timeline-date" id="emergency-timeline">
                  Mar 2026
                </div>
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
              <button class="action-btn secondary" onclick="resetBudget()">
                Reset
              </button>
              <button class="action-btn primary" onclick="saveBudget()">
                Save Changes
              </button>
            </div>
          </div>
        </div>
      </main>
    </div>

    <script>
      // Budget data
      let budget = {
        income: {
          employment: 2500,
          freelance: 400 // average of 200-600 range
        },
        expenses: {
          rent: 1200,
          utilities: 150,
          insurance: 150,
          groceries: 300,
          transport: 250,
          entertainment: 192,
          virtualfund: 150
        },
        goals: {
          emergency: 300,
          debt: 208,
          holiday: 150
        }
      };

      // Original budget for reset functionality
      const originalBudget = JSON.parse(JSON.stringify(budget));

      // Goal targets and rates for calculations
      const goalData = {
        emergency: { target: 5000, rate: 0 },
        debt: { target: 1500, rate: 19.9, isDebt: true },
        holiday: { target: 2000, rate: 0 }
      };

      function updateBudgetItem(slider) {
        const item = slider.dataset.item;
        const value = parseInt(slider.value);
        const amountElement = slider
          .closest('.budget-item')
          .querySelector('.item-amount');

        // Update the display
        amountElement.textContent = `£${value.toLocaleString()}`;

        // Update budget data
        if (budget.expenses[item] !== undefined) {
          budget.expenses[item] = value;
        } else if (budget.goals[item] !== undefined) {
          budget.goals[item] = value;
        }

        // Recalculate everything
        updateAllTotals();
        updateImpact();
        updateTimeline();
      }

      function updateAllTotals() {
        // Calculate totals
        const totalIncome = Object.values(budget.income).reduce(
          (sum, val) => sum + val,
          0
        );
        const totalExpenses = Object.values(budget.expenses).reduce(
          (sum, val) => sum + val,
          0
        );
        const totalGoals = Object.values(budget.goals).reduce(
          (sum, val) => sum + val,
          0
        );
        const surplus = totalIncome - totalExpenses - totalGoals;

        // Update main section totals
        document.getElementById('income-total').textContent =
          `£${totalIncome.toLocaleString()}`;
        document.getElementById('expenses-total').textContent =
          `£${totalExpenses.toLocaleString()}`;
        document.getElementById('goals-total').textContent =
          `£${totalGoals.toLocaleString()}`;

        // Update category totals
        const essentialsTotal =
          budget.expenses.rent +
          (budget.expenses.utilities || 0) +
          (budget.expenses.insurance || 0);
        const basicsTotal =
          budget.expenses.groceries + budget.expenses.transport;
        const wantsTotal = budget.expenses.entertainment;

        document.getElementById('essentials-total').textContent =
          `£${essentialsTotal.toLocaleString()}`;
        document.getElementById('basics-total').textContent =
          `£${basicsTotal.toLocaleString()}`;
        document.getElementById('wants-total').textContent =
          `£${wantsTotal.toLocaleString()}`;
        document.getElementById('virtualfund-category-total').textContent =
          `£${budget.expenses.virtualfund.toLocaleString()}`;

        // Update sidebar
        document.getElementById('sidebar-income').textContent =
          `£${totalIncome.toLocaleString()}`;
        document.getElementById('sidebar-expenses').textContent =
          `£${totalExpenses.toLocaleString()}`;
        document.getElementById('sidebar-goals').textContent =
          `£${totalGoals.toLocaleString()}`;
        document.getElementById('sidebar-surplus').textContent =
          `£${surplus.toLocaleString()}`;

        // Update allocation progress
        updateAllocationProgress(totalIncome, totalExpenses, totalGoals);

        // Update 50/30/20 rule
        update503020Rule(
          totalIncome,
          essentialsTotal,
          basicsTotal,
          wantsTotal,
          totalGoals
        );

        // Update debt freedom and saving funds
        updateDebtFreedom();
        updateSavingFunds(totalGoals);
      }

      function updateAllocationProgress(
        totalIncome,
        totalExpenses,
        totalGoals
      ) {
        const totalAllocated = totalExpenses + totalGoals;
        const allocationPercentage = Math.round(
          (totalAllocated / totalIncome) * 100
        );

        // Update percentage display
        document.getElementById('allocationPercentage').textContent =
          `${allocationPercentage}%`;

        // Update figures
        document.getElementById('allocationFigures').innerHTML = `
          <div class="allocated-amount">£${totalAllocated.toLocaleString()}</div>
          <div class="total-income">of £${totalIncome.toLocaleString()}</div>
        `;

        // Update circular progress
        const degrees = (allocationPercentage / 100) * 360;
        const circle = document.getElementById('allocationCircle');
        circle.style.background = `conic-gradient(#10b981 0deg ${degrees}deg, #e2e8f0 ${degrees}deg 360deg)`;
      }

      function updateDebtFreedom() {
        const debtAllocation = budget.goals.debt;
        if (debtAllocation === 0) {
          document.getElementById('debt-freedom-value').textContent = 'Paused';
          document.getElementById('debt-freedom-change').textContent =
            'No payments';
          document.getElementById('debt-freedom-change').className =
            'impact-change-text negative';
          return;
        }

        const calc = calculateGoalTimeline('debt');
        document.getElementById('debt-freedom-value').textContent =
          calc.timeline;

        // Calculate change from original
        const originalCalc = calculateOriginalTimeline('debt');
        const change = originalCalc - calc.months;
        const changeElement = document.getElementById('debt-freedom-change');

        if (change > 0) {
          changeElement.textContent = `${change} months faster`;
          changeElement.className = 'impact-change-text positive';
        } else if (change < 0) {
          changeElement.textContent = `${Math.abs(change)} months slower`;
          changeElement.className = 'impact-change-text negative';
        } else {
          changeElement.textContent = 'On track';
          changeElement.className = 'impact-change-text neutral';
        }
      }

      function updateSavingFunds(totalGoals) {
        // Calculate total savings allocation (excluding debt payments)
        const savingsTotal = budget.goals.emergency + budget.goals.holiday;

        document.getElementById('saving-funds-value').textContent =
          `£${savingsTotal.toLocaleString()}`;

        // Calculate change from original
        const originalSavings =
          originalBudget.goals.emergency + originalBudget.goals.holiday;
        const change = savingsTotal - originalSavings;
        const changeElement = document.getElementById('saving-funds-change');

        if (change > 0) {
          changeElement.textContent = `+£${change} increase`;
          changeElement.className = 'impact-change-text positive';
        } else if (change < 0) {
          changeElement.textContent = `-£${Math.abs(change)} decrease`;
          changeElement.className = 'impact-change-text negative';
        } else {
          changeElement.textContent = 'Per month';
          changeElement.className = 'impact-change-text neutral';
        }
      }

      function update503020Rule(
        totalIncome,
        essentialsTotal,
        basicsTotal,
        wantsTotal,
        totalGoals
      ) {
        // Calculate percentages
        const needsTotal = essentialsTotal + basicsTotal; // Essential needs
        const wantsPercent = Math.round((wantsTotal / totalIncome) * 100);
        const needsPercent = Math.round((needsTotal / totalIncome) * 100);
        const savingsPercent = Math.round((totalGoals / totalIncome) * 100);

        // Update progress bars
        document.getElementById('needsFill').style.width = `${needsPercent}%`;
        document.getElementById('wantsFill').style.width = `${wantsPercent}%`;
        document.getElementById('savingsFill').style.width =
          `${savingsPercent}%`;

        // Update percentages
        document.getElementById('needsPercentage').textContent =
          `${needsPercent}%`;
        document.getElementById('wantsPercentage').textContent =
          `${wantsPercent}%`;
        document.getElementById('savingsPercentage').textContent =
          `${savingsPercent}%`;

        // Update status
        const statusElement = document.getElementById('ruleStatus');
        const statusIcon = statusElement.querySelector('.status-icon');
        const statusText = statusElement.querySelector('.status-text');

        // Determine status
        let status = 'good';
        let message = '';
        let icon = '✅';

        if (needsPercent > 60) {
          status = 'danger';
          icon = '⚠️';
          message =
            'Your needs are consuming too much income. Consider reducing essential expenses.';
        } else if (wantsPercent > 35) {
          status = 'warning';
          icon = '⚡';
          message =
            'Your wants spending is high. Consider reducing discretionary expenses.';
        } else if (savingsPercent < 15) {
          status = 'warning';
          icon = '💡';
          message =
            'Consider increasing your savings rate for better financial security.';
        } else if (savingsPercent >= 20) {
          status = 'good';
          icon = '🎯';
          message =
            "Excellent! You're exceeding the recommended 20% savings rate.";
        } else {
          status = 'good';
          icon = '✅';
          message =
            'Good balance! Your budget aligns well with the 50/30/20 rule.';
        }

        // Apply status styling
        statusElement.className = `rule-status ${status === 'good' ? '' : status}`;
        statusIcon.textContent = icon;
        statusText.textContent = message;
      }

      function calculateGoalTimeline(goalKey) {
        const allocation = budget.goals[goalKey];
        const data = goalData[goalKey];

        if (allocation === 0) return { months: 999, timeline: 'Paused' };

        let months;
        if (data.isDebt && data.rate > 0) {
          // Debt payoff with interest
          const monthlyRate = data.rate / 100 / 12;
          const currentBalance = data.target;
          months = Math.ceil(
            Math.log(1 + (currentBalance * monthlyRate) / allocation) /
              Math.log(1 + monthlyRate)
          );
        } else {
          // Simple target savings
          months = Math.ceil(data.target / allocation);
        }

        const date = new Date();
        date.setMonth(date.getMonth() + months);
        const timeline = date.toLocaleDateString('en-GB', {
          month: 'short',
          year: 'numeric'
        });

        return { months, timeline };
      }

      function updateTimeline() {
        // Calculate new timelines
        const holidayCalc = calculateGoalTimeline('holiday');
        const debtCalc = calculateGoalTimeline('debt');
        const emergencyCalc = calculateGoalTimeline('emergency');

        // Update main timeline
        document.getElementById('holiday-timeline').textContent =
          holidayCalc.timeline;
        document.getElementById('debt-timeline').textContent =
          debtCalc.timeline;
        document.getElementById('emergency-timeline').textContent =
          emergencyCalc.timeline;

        // Update sidebar preview
        document.getElementById('preview-holiday').textContent =
          holidayCalc.timeline;
        document.getElementById('preview-debt').textContent = debtCalc.timeline;
        document.getElementById('preview-emergency').textContent =
          emergencyCalc.timeline;

        // Calculate average timeline for impact metrics
        const activeGoals = [holidayCalc, debtCalc, emergencyCalc].filter(
          (calc) => calc.months < 999
        );
        const avgMonths =
          activeGoals.length > 0
            ? Math.round(
                activeGoals.reduce((sum, calc) => sum + calc.months, 0) /
                  activeGoals.length
              )
            : 0;
      }

      function calculateOriginalTimeline(goalKey) {
        const allocation = originalBudget.goals[goalKey];
        const data = goalData[goalKey];

        if (data.isDebt && data.rate > 0) {
          const monthlyRate = data.rate / 100 / 12;
          return Math.ceil(
            Math.log(1 + (data.target * monthlyRate) / allocation) /
              Math.log(1 + monthlyRate)
          );
        }
        return Math.ceil(data.target / allocation);
      }

      function updateImpact() {
        // Update emergency buffer
        const totalExpenses = Object.values(budget.expenses).reduce(
          (sum, val) => sum + val,
          0
        );
        const bufferMonths = (budget.expenses.virtualfund * 12) / totalExpenses;
        document.getElementById('buffer-value').textContent =
          `${bufferMonths.toFixed(1)} months`;

        const bufferChangeElement = document.getElementById('buffer-change');
        const originalBuffer =
          (originalBudget.expenses.virtualfund * 12) /
          Object.values(originalBudget.expenses).reduce(
            (sum, val) => sum + val,
            0
          );
        const bufferChange = bufferMonths - originalBuffer;

        if (bufferChange > 0.1) {
          bufferChangeElement.textContent = `+${bufferChange.toFixed(1)} months`;
          bufferChangeElement.className = 'impact-change-text positive';
        } else if (bufferChange < -0.1) {
          bufferChangeElement.textContent = `${bufferChange.toFixed(1)} months`;
          bufferChangeElement.className = 'impact-change-text negative';
        } else {
          bufferChangeElement.textContent = 'Secure';
          bufferChangeElement.className = 'impact-change-text neutral';
        }

        // Update sidebar buffer preview
        const totalIncome = Object.values(budget.income).reduce(
          (sum, val) => sum + val,
          0
        );
        const totalGoals = Object.values(budget.goals).reduce(
          (sum, val) => sum + val,
          0
        );
        const newSurplus =
          totalIncome -
          Object.values(budget.expenses).reduce((sum, val) => sum + val, 0) -
          totalGoals;
        document.getElementById('preview-buffer').textContent =
          `£${newSurplus}`;
      }

      function resetBudget() {
        // Reset budget to original values
        budget = JSON.parse(JSON.stringify(originalBudget));

        // Reset all sliders
        document.querySelectorAll('.budget-slider').forEach((slider) => {
          const item = slider.dataset.item;
          if (budget.expenses[item] !== undefined) {
            slider.value = budget.expenses[item];
          } else if (budget.goals[item] !== undefined) {
            slider.value = budget.goals[item];
          }

          // Update amount display
          const amountElement = slider
            .closest('.budget-item')
            .querySelector('.item-amount');
          amountElement.textContent = `£${slider.value}`;
        });

        // Update all calculations
        updateAllTotals();
        updateImpact();
        updateTimeline();
      }

      function saveBudget() {
        // In a real app, this would save to a backend
        alert(
          'Budget changes saved successfully! 🎉\n\nYour updated budget is now active and will be reflected in your dashboard and projections.'
        );
      }

      // Initialize on page load
      document.addEventListener('DOMContentLoaded', function () {
        updateAllTotals();
        updateImpact();
        updateTimeline();
      });
    </script>
  </body>
</html>
